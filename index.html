<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>生字配对游戏（绿色主题版）</title>
<style>
body {
  font-family: 'Microsoft YaHei', sans-serif;
  margin: 0;
  padding: 20px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: #1b5e20; /* 主文字颜色绿 */

  background: linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)),
              url('https://cdn.pixabay.com/photo/2016/11/29/10/07/forest-1869100_1280.jpg') no-repeat center center;
  background-size: cover;
  transition: background 0.5s ease;
  overflow-x: hidden;
}

h1 { text-align: center; margin-top: 0; }
.score { font-size: 1.2rem; margin-top: 10px; color: #1b5e20; z-index: 1; }
.game-container {
  display: flex;
  flex-direction: column;
  gap: 15px;
  width: 90%;
  max-width: 500px;
  margin-top: 20px;
  z-index: 1;
}
.row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}
.word, .pair-box {
  flex: 1;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  border-radius: 15px;
  text-align: center;
  box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
  z-index: 1;
  transition: transform 0.3s ease;
}
.word {
  background: #a5d6a7; /* 左侧生字绿色背景 */
  border: 2px solid #2e7d32; /* 边框深绿色 */
  cursor: grab;
}
.word:active { transform: scale(1.1) rotate(-2deg); }

.pair-box {
  border: 2px dashed #81c784; /* 边框浅绿 */
  background: #c8e6c9; /* 目标框浅绿 */
  color: #000;
  position: relative;
}

/* 动画效果 */
.pair-box.flash { animation: flash 0.6s ease; }
.pair-box.correct {
  background-color: #2e7d32; /* 正确深绿色 */
  color: #fff;
  border: 2px solid #1b5e20;
  animation: jump 0.5s;
}
.pair-box.wrong {
  background-color: #f44336;
  color: #fff;
  border: 2px solid #b71c1c;
  animation: shake 0.5s;
}

@keyframes flash {
  0% { box-shadow: 0 0 0px #fff; }
  50% { box-shadow: 0 0 20px 10px #81c784; }
  100% { box-shadow: 0 0 0px #fff; }
}
@keyframes jump {
  0% { transform: translateY(0); }
  30% { transform: translateY(-15px); }
  60% { transform: translateY(0); }
  100% { transform: translateY(-5px); }
}
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-8px); }
  50% { transform: translateX(8px); }
  75% { transform: translateX(-8px); }
  100% { transform: translateX(0); }
}

button {
  margin-top: 15px;
  padding: 10px 25px;
  border: none;
  border-radius: 12px;
  background-color: #2e7d32; /* 按钮绿色 */
  color: #fff;
  cursor: pointer;
  font-size: 1rem;
}
</style>
</head>
<body>
<h1>生字配对游戏</h1>
<p>左边生字固定顺序，右边目标框随机排列。拖动正确显示绿色并跳跃动画，错误闪红回原位。</p>
<div class="score" id="score">完成：0 / 6</div>
<div class="game-container" id="gameContainer"></div>
<div>
  <button id="prevBtn" onclick="prevPage()" disabled>上一页</button>
  <button id="nextBtn" onclick="nextPage()">下一页</button>
  <button onclick="resetGame()">重置</button>
</div>

<script>
const allData = [
  {word: '森', pair: '林'},
  {word: '美', pair: '丽'},
  {word: '甘', pair: '甜'},
  {word: '舌', pair: '头'},
  {word: '喜', pair: '爱'},
  {word: '蜂', pair: '蜜'},
  {word: '露', pair: '珠'},
  {word: '肥', pair: '胖'},
  {word: '照', pair: '相'},
  {word: '月', pair: '亮'},
  {word: '绿', pair: '色'},
  {word: '出', pair: '来'}
];

const pageBackgrounds = [
  'https://i.pinimg.com/originals/74/89/42/7489426ef37a9ef59b9b7a2b7b7372f3.jpg',
  'https://i.pinimg.com/originals/74/89/42/7489426ef37a9ef59b9b7a2b7b7372f3.jpg'
];

let currentPage = 0;
const pageSize = 6;
let score = 0;

function shuffle(arr) {
  const array = [...arr];
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function renderPage() {
  const container = document.getElementById('gameContainer');
  container.innerHTML = '';
  score = 0;
  updateScore();

  document.body.style.background = `linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), 
                                    url(${pageBackgrounds[currentPage]}) no-repeat center center`;
  document.body.style.backgroundSize = 'cover';

  const start = currentPage * pageSize;
  const end = Math.min(start + pageSize, allData.length);
  const pageData = allData.slice(start, end);

  for (let i = 0; i < pageData.length; i++) {
    const row = document.createElement('div');
    row.className = 'row';

    const wordDiv = document.createElement('div');
    wordDiv.className = 'word';
    wordDiv.textContent = pageData[i].word;
    wordDiv.draggable = true;
    wordDiv.id = 'word-' + i;
    wordDiv.ondragstart = drag;
    row.appendChild(wordDiv);

    container.appendChild(row);
  }

  const targets = shuffle(pageData);
  const rows = container.querySelectorAll('.row');
  for (let i = 0; i < targets.length; i++) {
    const targetDiv = document.createElement('div');
    targetDiv.className = 'pair-box';
    targetDiv.dataset.word = targets[i].word;
    targetDiv.dataset.pair = targets[i].pair;
    targetDiv.dataset.full = targets[i].word + targets[i].pair;
    targetDiv.textContent = targets[i].pair;
    targetDiv.ondragover = allowDrop;
    targetDiv.ondrop = drop;

    rows[i].appendChild(targetDiv);
  }

  document.getElementById('prevBtn').disabled = currentPage === 0;
  document.getElementById('nextBtn').disabled = end >= allData.length;
}

function allowDrop(e) { e.preventDefault(); }
function drag(e) { e.dataTransfer.setData('text', e.target.id); }

function drop(e) {
  e.preventDefault();
  const dataId = e.dataTransfer.getData('text');
  const dragged = document.getElementById(dataId);
  const box = e.currentTarget;

  if (!dragged) return;
  if (box.querySelector('.word')) return;

  if (dragged.textContent === box.dataset.word) {
    box.textContent = box.dataset.full;
    box.classList.add('correct', 'flash');
    dragged.draggable = false;
    dragged.style.display = 'none';
    speakWord(box.dataset.full);
    score++;
    setTimeout(() => box.classList.remove('flash'), 600);
  } else {
    box.classList.add('wrong', 'flash');
    setTimeout(() => {
      box.classList.remove('wrong', 'flash');
    }, 600);
  }
  updateScore();
}

function updateScore() {
  const pageEnd = Math.min(pageSize, allData.length - currentPage * pageSize);
  document.getElementById('score').textContent = `完成：${score} / ${pageEnd}`;
}

function nextPage() {
  if ((currentPage + 1) * pageSize < allData.length) {
    currentPage++;
    renderPage();
  }
}

function prevPage() {
  if (currentPage > 0) {
    currentPage--;
    renderPage();
  }
}

function resetGame() {
  renderPage();
}

function speakWord(word) {
  try {
    const utter = new SpeechSynthesisUtterance(word);
    utter.lang = 'zh-CN';
    window.speechSynthesis.speak(utter);
  } catch(e) { console.warn('语音播放失败', e); }
}

renderPage();
</script>
</body>
</html>
